# 운영체제 구조
## 응용 프로그램, 운영체제, 컴퓨터 하드웨어 관계
- 운영체제는 응용 프로그램이 요청하는 메모리를 허가하고 분배한다.
- 운영체제는 응용 프로그램이 요청하는 CPU 시간을 제공한다. 
- 운영체제는 응용 프로그램이 요청하는 I/O Devices 사용을 허가 및 제어한다.

## 운영체제는 사용자 인터페이스 제공
- 쉘(Shell)
	- 사용자가 운영체제 기능과 서비스를 조작할 수 있도록 인터페이스를 제공하는 프로그램
	- 쉘은 터미널 환경(CLI) 과 GUI 환경 두 종류로 분류<br>
	![shell](https://github.com/parkje0927/TIL/blob/main/cs/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/shell.png)

## 운영체제는 응용 프로그램을 위해서도 인터페이스를 제공
- API(Application Programming Interface)
	- 함수로 제공
	- 운영체제의 기능을 사용하기 위해 Shell, Application 은 API 를 이용

- 시스템 콜
	- 시스템 콜 또는 시스템 호출 인터페이스
	- 운영체제가 운영체제 각 기능을 사용할 수 있도록 시스템 콜이라는 명령 또는 함수를 제공
	- API 내부에는 시스템 콜을 호출하는 형태로 만들어지는 경우가 대부분<br>
	![system_call](https://github.com/parkje0927/TIL/blob/main/cs/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/system_call.png)

## 운영체제를 만든다면?
1. 운영체제를 개발한다.
2. 시스템 콜을 개발
3. C API(Library) 개발
4. Shell 프로그램 개발
5. 응용 프로그램 개발

## 추가 정리
### 시스템 콜
- 운영체제 기능을 호출하는 함수(각 언어별 인터페이스)

### API
- 각 언어별 운영체제 기능 호출 인터페이스 함수

### Shell

## 정리
- 운영체제는 컴퓨터 하드웨어와 응용 프로그램을 관리한다. 
- 사용자 인터페이스를 제공하기 위해 쉘 프로그램을 제공한다. 
- 응용 프로그램이 운영체제 기능을 요청하기 위해서 운영체제는 시스템 콜을 제공한다.
	- 보통 시스템 콜을 직접 사용하기 보다는 해당 시스템 콜을 사용해서 만든 각 언어별 라이브러리(API)를 사용한다. 
- 우리가 만드는 프로그램은 맨 위에서 놀고 있다.

---

## CPU Protection Rings
- CPU 도 권한 모드라는 것을 가지고 있다. 
	- 사용자 모드(user mode) : 일반 명령어 / Ring3 / 응용 프로그램이 사용
	- 커널 모드(kernel mode by OS) : 특권 명령어 실행과 원하는 작업 수행을 위한 자원 접근을 가능케 하는 모드 / Ring0 / OS 가 사용
	- [ ] kernel 이란?
		- 알맹이, 핵심 => OS
	- [ ] shell 이란?
		- kernel 의 껍데기

- 시스템콜은 커널 모드로 실행
	- 커널 모드에서만 실행 가능한 기능들이 있음.
	- 커널 모드로 실행하려면 반드시 시스템 콜(커널 모드 -> CPU 실행)을 사용해야 함(거쳐야 함)
	- 시스템 콜은 운영체제 제공
	![kernel_mode](https://github.com/parkje0927/TIL/blob/main/cs/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/kernel_mode.png)

- 사용자 모드와 커널 모드
	- 함부로 응용 프로그램이 전체 컨퓨터 시스템을 헤치지 못함
	- 주민등록등본은 꼭 동사무소 또는 민원24시(정부 사이트)에서 특별한 신청서를 써야만 발급
		- 공무원은 특별한 권한을 가지고 출력 명령을 실행 -> 결과를 전달










































