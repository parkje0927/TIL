# 도메인 주도 설계(DDD) 기반 마이크로서비스(MSA) 모델링
> 인프런 한정헌님_도메인 주도 설계(DDD) 기반 마이크로서비스(MSA) 모델링을 듣고 정리한 내용입니다.

## 마이크로 서비스
- 여러 개의 서비스 조각으로 구성된다.
- 서비스는 각기 독립적인 기능을 제공한다.
- 격리되어 있어서 독립적으로 수정, 배포가 가능 -> 장애의 격리
- 저장소가 격리되어 있어서 다른 서비스에서 접근이 불가하다.
- MSA vs SOA
    - MSA : 중복되더라도 독립성 강조
    - SOA : 공통 모듈 참조 -> 의존성이 높아짐. 재사용성 강조

## 도메인 주도 설계(전략적 설계)
- 의존관계가 적어야 독립적으로 설계 가능
- 전략적 설계 => 큰 그림을 보는 것
    - Ubiquitous Language : 비즈니스 도메인에 관련된 용어, 정확 일관, 도메인 내에서 공통적으로 사용하는 언어
    - Bounded Context : 맥락의 경계, 모델의 경계, 도메인 간의 경계 => 고객, 주문의 경계
    - Context Map : 바운디드 컨텍스트 간의 접점
        - 협력형 패턴 
        - 공급자, 소비자 패턴
- 전술적 설계
    - Domain Model / Model-Driven Design : 유비쿼터스 언어로 비즈니스 도메인 모델을 구축하는 것
- 문제를 이해하려면 맥락을 이해해야 함. 그 소프트웨어를 통해 얻고자 하는 가치
- 하위 도메인
    - 핵심 => 핵심적인 것, 경쟁력
    - 일반 => 어디에나 필요한 기능
    - 지원 => 경쟁 우위는 없는 기능

## 이벤트 스토밍(전략적 설계)
- Domain Event : 과거형 동사, 일어난 사건
- Hot Spot : 해결해야 하는 문제
- Command : 모든 Domain Event 는 Command 와 한 쌍이다. 현재 동사
- Actor : Command 를 동작하게 하는 사용자, 명사 => 구체화 해야햔다.
- Policy : '회원 등록 시 로그인' 이거는 자동으로 발생하는 것이 아니다. But, '주문 이벤트가 발생하면 배송 요청 커맨드가 실행된다.' 이거는 자동 실행되는 것! 이처럼 도메인 이벤트가 발생할 때 자동으로 실행되는 것을 의미
- External System : 외부 시스템 ex 메일
- Aggregate : Domain Event, Command 에 의해 관리되는 데이터, 명사

## 도메인 주도 설계(전술적 설계)
> 비즈니스 로직 설계 방법 5가지
### 트랜잭션 패턴
- 유지보수가 불가능한 거대한 진흙 덩어리가 될 가능성이 높음.
- 핵심 기능에는 안 쓰는 게 좋다.